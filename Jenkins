pipeline {
    agent any
    stages {
        stage('Checkout') {
            steps {
                checkout scmGit(branches: [[name: '*/main']], extensions: [], userRemoteConfigs: [[url: 'https://github.com/SathishitHubaccount/devops_test']])
            }
        }
        stage('Clone repo') {
            steps {
                git branch: 'main',
                url: 'https://github.com/SathishitHubaccount/devops_test'
            }
        }
        stage("zip"){
            steps{
                sh "zip folder.zip app.py"
            }
        }
        stage("upload_to_s3"){
            steps{
                sh "aws s3api put-object --bucket sathis-devops-test --key folder.zip --body folder.zip"
            }
        }
        stage("uploading_lambda_code"){
            steps{
                sh "aws s3api get-object --bucket sathis-devops-test --key folder.zip --output folder.zip"
            }
        }
}

}